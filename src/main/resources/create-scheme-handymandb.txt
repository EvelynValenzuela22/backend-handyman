/*CREAR BASE DE DATOS PRIMERO LLAMADA "handymandb"*/


CREATE TABLE USERS(
id	SERIAL UNIQUE,
PRIMARY KEY(id)
);


CREATE TABLE TECHNICIAN(
id	SERIAL UNIQUE,
document_type	VARCHAR(20)	NOT NULL,
document_number	VARCHAR(20)	UNIQUE	NOT NULL,
first_name	VARCHAR(20)	NOT NULL,
last_name	VARCHAR(20)	NOT NULL,
PRIMARY KEY(id)
);


CREATE TABLE SERVICE_TYPE(
id	SERIAL UNIQUE,
name	VARCHAR(20)	UNIQUE NOT NULL,
PRIMARY KEY(id)
);


CREATE TABLE TIME(
id	SERIAL UNIQUE,
title	VARCHAR(20)	UNIQUE NOT NULL,
PRIMARY KEY(id)
);


CREATE TABLE SERVICE(
id	SERIAL UNIQUE,
type_id	INT	NOT NULL,
address VARCHAR(30)	NOT NULL,
time_id	INT	NOT NULL,
user_id	BIGINT	NOT NULL, 	
CONSTRAINT fk_type FOREIGN KEY (type_id)
      REFERENCES SERVICE_TYPE(id),
CONSTRAINT fk_time FOREIGN KEY (time_id)
      REFERENCES TIME(id),
CONSTRAINT fk_user FOREIGN KEY (user_id)
      REFERENCES USERS(id),
PRIMARY KEY(id)
);




CREATE TABLE SERVICE_TECHNICIAN(
service_id	BIGINT	NOT NULL,
technician_id	INT	NOT NULL,
start_date	DATE	NOT NULL,
final_date	DATE	NOT NULL,
CONSTRAINT fk_service FOREIGN KEY (service_id)
      REFERENCES SERVICE(id),
CONSTRAINT fk_technician FOREIGN KEY (technician_id)
      REFERENCES TECHNICIAN(id),
PRIMARY KEY(service_id,technician_id)
);
